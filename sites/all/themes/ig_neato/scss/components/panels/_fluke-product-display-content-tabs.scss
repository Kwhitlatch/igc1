// This partitions the tab theming from the rest of the site to prevent namespace collision.

// Governs the desktop/mobile/tablet layouts for ONLY the tabs.
// These were adapated from bootstrap hidden-xs and visible-xs utilities
// The tab-collapse.js implements the visible and hidden classes for us
// The code implementing this is in:
// /sites/all/modules/custom/igcommerce_utility/modules/igcommerce_utility_products/js/igcommerce_utility_products.js
#fluke-product-display-content-tabs {
  @include media(max-width $screen-md) {
    background-color: #eaeaea;
  }
  .visible-accordion {
    display: none !important;
    @include media(max-width $screen-md) {
      display: block !important;
    }
  }
  .hidden-tabs {
    @include media(max-width $screen-md) {
      display: none !important;
    }
  }  
  
  /* 
   * This styling was cribbed mainly from _fluke-product-display-accessories.scss 
   * We use > and + heavily to prevent namespace collissions with nested tabs structres
   * that predate this tab tab layout
   */
  #myTab-accordion {
    > .panel {
      border-bottom: none;
      &:not(:first-of-type) {
        border-top: 1px solid #ccc;
      }
      > .panel-heading {
        > h4 {
          font-weight: 700;
          font-size: 20px;
          line-height: 1.3;
          margin-bottom: 0;
          padding: 1rem 0;
          position: relative;
          > a {
            color: $gray-21;
            width: 100%;
            &:after {
              color: $action-color;
              content: '\f068'; // minus icon
              font-family: fluke-icon-font;
              height: 40px;
              padding-top: 10px;
              position: absolute;
              right: 12px;
              text-align: right;
              top: 0;
              width: 100%; // Expands the toggle button to cover the title
            }
            &:focus,
            &:visited,
            &:active,
            &:hover {
              text-decoration: none;
            }
            &.collapsed {
              &:after {
                content: '\f067'; // plus icon
              }
            }
          }
        }
      + .panel-collapse {
        overflow: auto;
        &.collapsing {
          overflow-y:hidden; // hides the scrollbar for a moment while the panel opens
          }
        }
      }
    }
  }

  /*COLLAPSE STYLING FOR TAB_COLLAPSE*/
  .collapse {
    display: none;
  }
  .collapse.in {
    display: block;
  }
  .collapsing {
    position: relative;
    height: 0;
    overflow: hidden;
    -webkit-transition-timing-function: ease;
         -o-transition-timing-function: ease;
            transition-timing-function: ease;
    -webkit-transition-duration: .35s;
         -o-transition-duration: .35s;
            transition-duration: .35s;
    -webkit-transition-property: height, visibility;
         -o-transition-property: height, visibility;
            transition-property: height, visibility;
  }

  /*NOT TAB_COLLAPSE STUFF*/
  .tab-content {
    .tab-pane,
    .pane,
    h2,
    section,
    aside {
      &:focus { 
        outline: none;
      }
    }
  }
  .tab-content > .tab-pane {
    display: none;
  }
  .tab-content > .active {
    display: block;
  }
  .fade {
    opacity: 0;
    @include transition(opacity .2s ease-in-out);
  }
  .fade.in {
    opacity: 1;
  }
  .nav {
    padding-left: 0;
    margin-bottom: 0;
    list-style: none;
  }
  .nav > li {
    position: relative;
    display: block;
    vertical-align: bottom;
    border-bottom: 5px solid transparent;
    line-height: 1.1;
  }
  .nav > li > a {
    position: relative;
    display: block;
    padding: 10px 5px;
    text-align: center;
  }
  .nav > li > a:hover,
  .nav > li > a:focus {
    text-decoration: none;
  }
  .nav .open > a,
  .nav .open > a:hover,
  .nav .open > a:focus {
    background-color: #eee;
    border-color: #337ab7;
  }
  .nav-tabs > li > a {
    text-align: center;
    font-size: 20px;
    font-family: "Roboto Slab", "Arial Black", serif;
    font-weight: 400;
    color: #212121;
  }
  .nav-tabs > li.active {
      border-bottom: 5px solid #336699;
  }
  .nav-tabs.nav-justified {
    width: 100%;
  }
  .nav-tabs.nav-justified > li {
    float: none;
  }
  .nav-tabs.nav-justified > li > a {
    margin-bottom: 5px;
    text-align: center;
  }
  @media (min-width: 768px) {
    .nav-tabs.nav-justified > li {
      display: table-cell;
      width: 1%;
    }
    .nav-tabs.nav-justified > li > a {
      margin-bottom: 0;
    }
  }
  .nav-justified {
    width: 100%;
  }
  .nav-justified > li {
    float: none;
  }
  .nav-justified > li > a {
    margin-bottom: 5px;
    text-align: center;
  }
  @media (min-width: 768px) {
    .nav-justified > li {
      display: table-cell;
      width: 1%;
    }
    .nav-justified > li > a {
      margin-bottom: 0;
    }
  }
} // end #fluke-product-display-content-tabs