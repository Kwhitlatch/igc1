{"version":3,"sources":["tocs.js"],"names":["$","Drupal","behaviors","igcommerce_tocs","attach","context","settings","once","click","slideToggle","console","log","each","shown","this","find","show","hide","items","size","id","attr","text","css","children","on","loadMore","parents","empty","remaining","slideDown","lastshown","showLess","itemsDivided","not","slideUp","toString","split","slice","jQuery"],"mappings":"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","file":"../tocs.js","sourcesContent":["(function ($) {\n    'use strict';\n    Drupal.behaviors.igcommerce_tocs = {\n        attach: function (context, settings) {\n            $('h3.slider-trigger').once('myslider', function() {\n                $('h3.slider-trigger').click(function(){\n                    $('.slider').slideToggle();\n                });\n            });\n\n            var lastAdded, originalItems;\n            if (typeof console !== \"undefined\"){\n                console.log(\"Module loaded file\");\n            }\n            $('.quicktabs-tabpage', context).each(function () {\n                var shown =  10;\n                $(this).find('.row:lt('+ shown +')').show();\n                $(this).find('#showLess').hide();\n                var items =  $(this).find('.row').size();\n                if (typeof console !== \"undefined\"){\n                    var id = $(this).attr('id');\n                    console.log(\"Div \" + id + \" has (\" + items + \") total items\");\n                }\n                if(items <= 9) {\n                    $(this).find('#loadMore').hide();\n                    $(this).find(\".total_loaded\").text(items);\n                }\n                if (items > 1) {\n                  $(this).find(\".number_of_items\").css(\"display\", \"inline-block\");\n                  $(this).find(\".total_items\").text(items);\n                }\n                if(items >= 10) {\n                    $(this).find('#loadMore').css(\"display\", \"inline-block\");\n                    $(this).find(\".total_loaded\").text(shown);\n                }\n\n                $(this).children().find( \"#loadMore\" ).once().on({\n                    click: function() {\n\n                        if (typeof console !== \"undefined\"){\n                            console.log(\"LoadMore clicked\");\n                        }\n                        var loadMore = $(this);\n                        items =  loadMore.parents('.quicktabs-tabpage').find('.row').size();\n                        shown = loadMore.parents('.quicktabs-tabpage').find('.row:visible').size()+10;\n\n                        loadMore.parents('.quicktabs-tabpage').find(\".total_loaded\").empty().text(shown);\n                        // Add less to number of loaded items\n                        var remaining = loadMore.parents('.quicktabs-tabpage').find('.row:hidden').size()\n                        if(remaining < 10) {\n                          loadMore.parents('.quicktabs-tabpage').find(\".total_loaded\").empty().text(items);\n                          loadMore.parents('.quicktabs-tabpage').find('#showLess').css(\"display\", \"inline-block\");\n                        }\n\n                        if(shown >= items) {\n                            loadMore.parents('.quicktabs-tabpage').find('#showLess').css(\"display\", \"inline-block\");\n                        }\n                        if(shown < items) {\n                            loadMore.parents('.quicktabs-tabpage').find('.row:lt('+shown+')').slideDown( 'fast', function() {\n                                var lastshown = loadMore.parents('.quicktabs-tabpage').find('.row:visible').size();\n                                loadMore.parents('.quicktabs-tabpage').find('#showLess').css(\"display\", \"inline-block\");\n                                if(lastshown >= items) {\n                                    loadMore.hide();\n                                }\n                            });\n                        }\n                        else {\n                            loadMore.parents('.quicktabs-tabpage').find('.row:lt('+items+')').slideDown(\"fast\");\n                            loadMore.hide();\n                        }\n                    }\n                });\n\n                $(this).children().find( \"#showLess\" ).once().on({\n                    click: function() {\n\n                        if (typeof console !== \"undefined\"){\n                            console.log(\"Showless clicked\");\n                        }\n                        var showLess = $(this);\n                        items =  showLess.parents('.quicktabs-tabpage').find('.row:visible').size();\n\n                        // Hide items not divisible by 10 first\n                        if(items > 10) {\n                          var itemsDivided = items / 10;\n                          if(itemsDivided % 1 == 0) {\n                            // Check for older IE browser\n                            items = (items-10<0) ? shown : items-10;\n                            showLess.parents('.quicktabs-tabpage').find('.row').not(':lt(' + items + ')').slideUp(1000, function() {\n                              items = showLess.parents('.quicktabs-tabpage').find('.row:visible').size();\n                              $(this).parents('.quicktabs-tabpage').find(\".total_loaded\").empty().text(items);\n\n                              if(showLess.parents('.quicktabs-tabpage').find('.row:visible').size() <= 10) {\n                                  showLess.hide();\n                              }\n\n                            });\n                          }\n                          else {\n                            items = itemsDivided.toString().split('.')[1];\n                            showLess.parents('.quicktabs-tabpage').find('.row:visible').slice(-items).slideUp(1000, function() {\n                              items = showLess.parents('.quicktabs-tabpage').find('.row:visible').size();\n                              showLess.parents('.quicktabs-tabpage').find(\".total_loaded\").empty().text(items);\n                            });\n                          }\n                        }\n\n                        showLess.parents('.quicktabs-tabpage').find('#loadMore').css(\"display\", \"inline-block\");\n\n                    }\n\n                });\n            });\n        }\n    }\n\n}(jQuery));\n"]}